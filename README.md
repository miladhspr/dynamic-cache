# سیستم کش پویا در لاراول

## معرفی

این پروژه یک **سیستم کش پویا** در لاراول پیاده‌سازی می‌کند که به‌طور داینامیک از استراتژی‌های مختلف کش (Redis، Database و File) بسته به تنظیمات فایل `.env` استفاده می‌کند. همچنین، کش به‌طور خودکار زمانی که داده‌های مرتبط تغییر می‌کنند (ایجاد، ویرایش یا حذف) پاک می‌شود. از Docker برای راه‌اندازی محیط توسعه استفاده شده است و این روش کانتینری به ما امکان می‌دهد که برنامه را به‌راحتی در محیط‌های مختلف اجرا کنیم.

## ویژگی‌ها

- **استراتژی کش داینامیک**: استفاده از کش Redis، Database یا File بر اساس تنظیمات پیکربندی.
- **حذف خودکار کش**: کش به‌طور خودکار هنگام تغییر داده‌های مرتبط (ایجاد، ویرایش یا حذف) پاک می‌شود.
- **راه‌اندازی با Docker**: اجرای برنامه در کانتینرهای Docker با سرویس‌های PHP، MySQL، Redis و Nginx.
- **انقضای کش**: تنظیمات TTL مختلف برای داده‌های عمومی (1 ساعت).

## الگوهای طراحی (Design Patterns)

این پروژه از چندین الگوی طراحی شناخته‌شده استفاده کرده است تا معماری تمیز و انعطاف‌پذیری را حفظ کند:

### 1. **الگوی استراتژی (Strategy Pattern)**

کلاس `CustomCacheManager` از **الگوی استراتژی** برای تغییر مکانیزم کش استفاده می‌کند. بسته به پیکربندی در فایل `.env`، در زمان اجرا استراتژی مناسب انتخاب می‌شود.

- **اینترفیس**: `CacheDriverInterface` قرارداد مورد نظر برای استراتژی‌های مختلف کش (شامل `get`، `put` و `forget`).
- **استراتژی‌های خاص**:
    - `RedisCacheDriver` از Redis برای کش استفاده می‌کند.
    - `DatabaseCacheDriver` از یک جدول دیتابیس برای کش استفاده می‌کند.
    - `FileCacheDriver` کش را در فایل‌ها ذخیره می‌کند.

### 2. **الگوی ناظر (Observer Pattern)**

در این پروژه از **الگوی ناظر** با استفاده از کلاس `PostObserver` پیاده‌سازی شده است. ناظر برای تغییرات مدل‌های `Post` گوش می‌دهد و هنگام ایجاد، ویرایش یا حذف یک پست، کش مرتبط با آن را پاک می‌کند. این الگو اطمینان حاصل می‌کند که کش همیشه با داده‌های اصلی هم‌خوانی دارد.

### 3. **الگوی فساد (Facade Pattern)**

کلاس `CustomCache` به‌عنوان یک **فساد** عمل می‌کند که به‌سادگی از استراتژی‌های مختلف کش پشتیبانی می‌کند. این فساد واسطی ساده برای تعامل با کش فراهم می‌کند و پیچیدگی‌های مدیریت استراتژی‌های مختلف کش را مخفی می‌کند.

## راه‌اندازی و نصب

### پیش‌نیازها

قبل از راه‌اندازی پروژه، اطمینان حاصل کنید که ابزارهای زیر روی سیستم شما نصب شده باشد:

- **Docker**: برای اجرای محیط توسعه.
- **Docker Compose**: برای مدیریت اپلیکیشن‌های چندکانتینره.

### مرحله 1: کلون کردن مخزن

مخزن پروژه را به سیستم خود کلون کنید:

```bash
docker-compose up --build

docker-compose exec app php artisan migrate

docker-compose exec app php artisan db:seed
```

در مسیر زیر میتوانید خروجی ببینید
```bash
http://localhost:9000/posts
```
